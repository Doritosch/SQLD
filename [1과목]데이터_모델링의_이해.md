# 데이터 모델링의 이해
### 데이터 모델링이란?
- 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
- 현실 세계의 데이터(what)를 약속된 표기법으로 표현하는 과정
- 데이터베이스를 구축하기위한 분석 및 설계의 과정

### 데이터 모델링 유의점
- 여러 장소의 데이터베이스에 같은 정보를 저장하지 않도록 하여 **중복성**을 최소화 한다.
- 데이터의 정의를 데이터의 사용 프로세스와 분리하여 **유연성**을 높인다.
- 데이터 간의 상호 연관관계를 명확하게 정의하여 **일관성** 있게 데이터가 유지되도록 한다.

## 데이터 독립성
데이터베이스의 구조와 데이터의 내용이 서로 영향을 미치지 않는 것을 의미한다.

1. 데이터베이스의 유지보수와 확장성을 향상시킨다.
2. 데이터베이스의 구조가 변경되더라도 응용 프로그램이나 사용자에게 영향을 주지 않으므로, 시스템의 안정성과 신뢰성을 높일 수 있다.
3. 데이터베이스의 성능이나 보안을 개선하기 위해 필요한 조치를 쉽게 적용할 수 있다.
### 논리적 데이터 독립성
- 데이터베이스의 논리적 구조가 변경되어도 응용 프로그램이나 사용자의 요구에 영향을 주지 않는 것을 의미한다.
### 물리적 데이터 독립성
- 데이터베이스의 물리적 구조가 변경되어도 논리적 구조나 데이터의 내용에 영향을 주지 않는 것을 의미한다.
## 스키마
### 스키마란?
데이터베이스의 구조와 제약 조건에 대한 전반적인 명세를 기술한 것이다.
### 스키마 특징
1. 스키마는 데이터 사전에 저장되며, 다른 이름으로 메타 데이터라고도 한다.
    - <데이터 사전> : 시스템 전체에서 나타나는 데이터 항목들에 대한 정보를 지정한 중앙 저장소
2. 시간에 따라 불변
3. 데이터의 구조적 특성을 의미하며, 인스턴스에 의해 규정된다.
4. 현실 세계의 특정한 한 부분의 표현으로서 특정 데이터 모델을 이용해서 만들어진다.
### 데이터베이스 스키마 구조 3단계
- **외부스키마(External Schema)**
    - 사용자나 응용프로그래머가 개인의 입장에서 필요한 데이터베이스의 논리적 구조를 정의한다.
    - 전체 데이터베이스의 한 논리적인 부분으로 볼 수 있기 때문에 **서브 스키마**라고도 한다.
    - 하나의 데이터베이스 시스템에는 여러 개의 외부 스키마가 존재할 수도 있다.
    - 하나의 외부 스키마를 여러개의 응용 프로그램 혹은 사용자가 공유 할 수 있다.
- **개념스키마(Conceptual Schema)**
    - 모든 사용자 관점을 통합한 조직 전체 관점의 통합적 표현
    - 전체적인 논리적 구조로, 모든 응용 프로그램이나 사용자들이 필요로 하는 데이터를 종합한 조직 전체의 데이터베이스로 하나만 존재한다.
    - 개체 간의 관계와 제약 조건을 나타내고 데이터베이스의 접근 권한, 보안 및 무결성 규칙에 관한 명세를 정의한다.
    - 데이터베이스 파일에 저장되는 데이터의 형태를 나타내는 것으로, 단순히 스키마라고 하면 개념 스키마를 의미한다.
    - 기관이나 조직체의 관점에서 데이터베이스를 정의한 것이다.
    - DBA에 의해 구성된다.
- **내부스키마(Internal Schema)**
    - 물리적인 저장장치 입장에서 데이터가 저장되는 방법을 기술한 것이다.
    - 실제 데이터베이스에 저장될 레코드의 물리적인 구조를 정의한다.
    - 저장 데이터의 표현 방법, 내부 레코드의 물리적 순서, 인덱스 유/무 등을 나타낸다.
    - 시스템 프로그래머나 시스템 설계자가 관리한다.

## ERD(Entity Relationship Diagram)
세상의 사물을 **개체(Entity)** 와 개체 간의 **관계(Relationship)** 로 표현하는 데이터 모델링 방식으로 개념적 데이터 모델링 단계에서 사용된다.
### ERD 구성 요소
- Entity: 정의 가능한 사물 또는 개념
    - 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
    - 유일한 식별자에 의해 식별이 가능해야 한다.
    - 영속적으로 존재하는 인스턴스의 집합이어야 한다.
    - 업무 프로세스에 의해 이용되어야 한다.
    - 반드시 속성이 있어야 한다.
    - 다른 Entity와 최소 한 개 이상의 관계가 있어야 한다.

    발생 시점에 따른 Entity 분류
    - 기본, 키 엔터티
    - 중심 엔터티
    - 행위 엔터티
- Attribute
    - Entity 이름과 중복되면 안된다.
    - Entity 에 대한 자세하고 구체적인 정보를 나타낸다.
    - 하나의 Entity 는 두 개 이상의 Attribute 를 갖는다.
    - Attribute 도 집합이다.
    - “#”은 UID, “*”는 필수 (Mandatory), “o”는 선택 (Optional) Attribute 를 의미한다.
    
    속성의 특징에 따른 분류
    - 기본속성
    - 설계속성: 업무상 필요한 데이터 외에 데이터 모델링을 위해, 업무를 규칙화하기 위해 속성을 새로 만들거나 변형하여 정의하는 속성이다.
    - 파생속성: 다른 속성에 영향을 받아 발생하는 속성으로, 계산된 값들이 여기에 해당한다. 다른 속성에 영향을 받으므로, 영향받는 속성을 알아두어야 하는 등 유의할 점이 많아서 가급적 적게 정의하는 것이 좋다.

    도메인: 각 속성이 가질 수 있는 값의 범위
- Relationship
    - Entity 간의 논리적인 연관성을 의미한다.
    - 존재에 의한 관계와 행위에 의한 관계로 구분될 수 있다.
        * 존재에 의한 관계: ex) 부서와 사원의 관계
        * 행위에 의한 관계: ex) 고객과 주문의 관계
    - 관계의 표기법: 관계명, 관계차수, 선택성
    - 연관관계: 항상 이용하는 관계, 존재적 관계, 실선, 소스코드에서 멤버변수로 선언하여 사용
    - 의존관계: 상대방 클래스의 행위에 의해 관계가 형성될 때 구분하여 표현, 점선, operation에서 파라미터로 사용
    
## 정규화
정규화란 이상현상이 있는 릴레이션을 분해하여 이상현상을 없애는 과정이다. ex) 중복 제거
### 제 1 정규화
테이블의 컬럼이 원자값을 갖도록 테이블을 분해하는 것이다.
1. 각 컬럼이 하나의 속성만을 가져야한다.
2. 하나의 컬럼은 같은 종류나 타입(type)의 값을 가져야한다.
3. 각 컬럼이 유일한 이름을 가져야한다.
4. 칼럼의 순서가 상관없어야한다.
### 제 2 정규화
제 1 정규화를 한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다.
* 완전 함수 종속: 기본키의 부분집합이 결정자가 되어서는 안된다.
1. 제 1정규화를 만족해야한다.
2. 모든 컬럼이 부분적 종속이 없어야한다. 모든 칼럼이 완전 함수 종속을 만족해야한다.
### 제 3 정규화
제 2 정규화를 한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것이다.
* 이행적 종속: A->B, B->C가 성립할 때, A->C가 성립되는 것이다.
1. 제 2 정규화를 만족해야한다.
2. 기본키를 제외한 속성들 간의 이행 종속성(Transitive Dependency)이 없어야한다.
### BCNF(Boyce-codd Normal Form)
3차 정규화를 만족하면서 모든 결정자가 후보키 집합에 속한 정규형이다.
1. 제 3 정규화를 만족해야 한다.
2. 모든 결정자가 후보키 집합에 속해야 한다.
### 제 4 정규화
다치 종속을 제거한다.
* 다치 종속: 두개의 독립된 애트리뷰트가 1:N 관계로 대응하는 관계로, '↠'화살표로 종속성을 표시한다.
### 제 5 정규화
조인 종속을 제거한다.
* 조인 종속: 하나의 릴레이션을 여러개의 릴레이션으로 분해하였다가, 다시 조인했을 때 데이터 손실이 없고 필요없는 데이터가 생기는 것을 말한다.


|  항목 |  식별자 관계    |  비식별자 관계    |  
| ---- | ---- | ---- |
| 목적  |  강한 연결관계 표현   |  약한 연결관계 표현    |
| 자식 주식별자 영향  |  자식 주식별자의 구성에 포함됨    |  자식 일반 속성에 포함됨    |
| 표기법 |  실선 표현    |   점선 표현   |
| 연결 고려사항  |  - 반드시 부모 엔티티에 종속 <br>  - 자식 주식별자 구성에 부모 주식별자 포함 필요 <br> - 상속받은 주식별자 속성을 타 엔터티에 이전 필요    |  -약한 종속관계 <br> - 자식 주식별자 구성을 독립적으로 구성 <br> - 자식 주식별자구성에 부모 주식별자 부분 필요 <br> - 상속받은 주식별자 속성을 타 엔터티에 차단 필요 <br> - 부모쪽의 관계참여가 선택관계    |